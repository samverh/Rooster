<!-- This script visualizes the csv schedule generated by main.py -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link href="rooster.css" rel="stylesheet"/>
    <title>Rooster Team Tortuga</title>

  </head>
  <body>
    <div id="table"></div>
    <script type="text/javascript">

      function readTextFile(file)
      {
          var rawFile = new XMLHttpRequest();
          rawFile.open("GET", file, true);
          rawFile.onreadystatechange = function ()
          {
              if(rawFile.readyState === 4)
              {
                  if(rawFile.status === 200 || rawFile.status == 0)
                  {
                      var allText = rawFile.responseText;
                      // console.log(allText);
                      var lines = allText.split("\n");
                      // console.log(lines)
                      // lines.forEach(function(item) {
                      // })
                      var table = '';
                      var rows = lines
                      console.log(rows)
                      table += '<table>'

                      for(var i = 0; i < rows.length; i++) {

                          var columns = rows[i].split(/,/);
                          console.log("ha");
                          // for (var i = 0; i < columns.length; i++) {
                          //   columns[i] = columns[i].split("-");
                          //   console.log(columns);
                          // }

                          table += '<tr>';

                          for(var j = 0; j < columns.length -1; j++) {
                            if (columns[columns.length] == ""){
                              table += '<td style="color:red">' + columns[j] + '</td>';
                            }
                            else {
                              table += '<td>' + columns[j] + '</td>';
                            }

                          }
                          table += '</tr>';
                      }
                      table += '</table>';
                      document.getElementById('table').innerHTML = table;
                  }
              }
          }
          rawFile.send(null);
      }

      readTextFile("schedule.csv");
    </script>
  </body>
</html>
